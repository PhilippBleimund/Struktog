stages:
  - build

buildGame:
  image: node:latest
  stage: build
  script:
    - PATH="./node_modules/.bin:$PATH"
    - npm install
    - webpack --mode production
    - cd build
    - tar -czf ${CI_PROJECT_NAME}-${CI_COMMIT_TAG}.tar.gz *
    - mv ./${CI_PROJECT_NAME}-${CI_COMMIT_TAG}.tar.gz ..
  artifacts:
    paths:
      - ${CI_PROJECT_NAME}-${CI_COMMIT_TAG}.tar.gz
  only:
    - webpack
